<%- include('../partials/header') %>
<h1 class="display-5"><%= title %></h1>
<div class="mb-3">
    <p class="lead">Discussion and archive of species related content</p>
</div>  
    <a class="btn btn-primary" href="/blogs/add" id="buttonPad">Create Entry</a>
    <div class="page-container"> <!-- Line Changed -->
        <div class="table-container"> <!-- Line Changed -->
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Content</th>
                        <th>Posted By</th>
                        <% if (user) { %>
                            <th>Actions</th>
                        <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% blogs.forEach(blog => { %>
                        <tr>
                            <td>
                                <a href="/blogs/<%= blog.id %>"><%= blog.title %></a>
                            </td>
                            <td class="truncated"><%= blog.content %></td>
                            <td><%= blog.user %></td>
                            <% if (user && user._id.toString() === blog.user._id.toString()) { %>
                                <td>
                                    <a class="btn btn-primary" href="/blogs/edit/<%= blog._id %>">Edit</a>
                                    <a class="btn btn-danger" href="/blogs/delete/<%= blog._id %>" onclick="return confirmDeletion()">Delete</a>
                                </td>
                            <% } else { %>
                                <td></td> <!-- Empty cell if user is not the owner -->
                            <% } %>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
    </div>
</div>

<%- include('../partials/footer') %>
